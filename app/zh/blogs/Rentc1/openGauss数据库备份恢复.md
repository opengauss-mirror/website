---
title: 'openGauss数据库备份恢复'

date: '2022-09-30'
category: 'blog'
tags: ['openGauss数据库备份恢复']

archives: '2022-09-30'

author: 'Rentc'

summary: 'openGauss数据库备份恢复'

img: ''

times: '10:40'
---

当需要进行备份恢复操作时，主要从以下四个方面考虑数据备份方案。

- 备份对业务的影响在可接受范围。

- 数据库恢复效率。

  为尽量减小数据库故障的影响，要使恢复时间减到最少，从而使恢复的效率达到最高。

- 数据可恢复程度。当数据库失效后，要尽量减少数据损失。

- 数据库恢复成本。在现网选择备份策略时参考的因素比较多，如备份对象、数据大小、网络配置等，

备份与恢复类型可分为逻辑备份与恢复、物理备份与恢复、闪回恢复。

- 逻辑备份与恢复：通过逻辑导出对数据进行备份，逻辑备份只能基于备份时刻进行数据转储，所以恢复时也只能恢复到备份时保存的数据。对于故障点和备份点之间的数据，逻辑备份无能为力，逻辑备份适合备份那些很少变化的数据，当这些数据因误操作被损坏时，可以通过逻辑备份进行快速恢复。如果通过逻辑备份进行全库恢复，通常需要重建数据库，导入备份数据来完成，对于可用性要求很高的数据库，这种恢复时间太长，通常不被采用。由于逻辑备份具有平台无关性，所以更为常见的是，逻辑备份被作为一个数据迁移及移动的主要手段。

- 物理备份与恢复：通过物理文件拷贝的方式对数据库进行备份，以磁盘块为基本单位将数据从主机复制到备机。通过备份的数据文件及归档日志等文件，数据库可以进行完全恢复。物理备份速度快，一般被用作对数据进行备份和恢复，用于全量备份的场景。通过合理规划，可以低成本进行备份与恢复。

- 闪回恢复：利用回收站的闪回恢复删除的表。数据库的回收站功能类似于 windows 系统的回收站，将删除的表信息保存到回收站中。利用 MVCC 机制闪回恢复到指定时间点或者 CSN 点。
